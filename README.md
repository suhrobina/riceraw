RiceRAW ðŸŒ±
==========
**The Progressive Linux Desktop Environment for Professionals**

_Inspired by [Luke Smith](https://lukesmith.xyz)_

### Author

Suhrob R. Nuraliev <LongOverdueVitalEnergy@Gmail.com>

### Contributors

Alexander Bordachyov <bam85g@gmail.com>

### Overview

- **Distro**           :  Debian 10 Buster
- **Display Manager**  :  slim
- **Window Manager**   :  dwm
- **Status Bar**       :  python script
- **Screenlock**       :  slimlock
- **GTK3 Theme**       :  shades-of-gray-theme
- **Icon Theme**       :  papirus-icon-theme
- **Main Font**        :  iosevka
- **Compositor**       :  compton
- **Terminal**         :  xterm
- **Shell**            :  bash
- **Editor**           :  neovim
- **File Manager**     :  vifm
- **Image Viewer**     :  sxiv
- **Others**           :  fzf, dunst, nitrogen, newsboat, calcurse, zathura ...

Full list of favorite Linux packages: [packages.csv](packages.csv)

You can get all dotfiles [here](dotfiles/)

See the source files [here](sources/)

### Screenshots

![Image](img/screenshot1.png)

![Image](img/screenshot2.png)

![Image](img/screenshot3.png)


PART 1/2 Distro Installation Workflow
-------------------------------------
Linux Distro is DEBIAN 10 Buster

**Tip**: Use `timeshift` software to facilitate the process of building Linux

### Partitioning

Method #1: Create a Linux Swap Partition

```
1#  |  Primary  |  ext4  |  /  |  boot |  /dev/sda1
2#  |  Primary  |  swap  |     |       |  /dev/sda2
```

Method #2: Create a Linux Swap File

For more information please search the internet

### Grub menu colors (optional)

Edit `/boot/grub/grub.cfg` to change a boot menu colors:

```
set menu_color_normal=dark-gray/black
set menu_color_highlight=black/dark-gray
```
### Network

Install necessary packages

```bash
$ sudo apt install network-manager
```

Configure network connection via TUI

```bash
$ nmtui
```

Non-free Wi-Fi drivers

```bash
$ sudo apt install firmware-iwlwifi
```

### System locale

Add `LC_ALL="en_US.UTF-8"` line in `/etc/default/locale` file

```
#  File generated by update-locale
LANG="en_US.UTF-8"
LANGUAGE="en_US:en"
LC_ALL="en_US.UTF-8"
```

Locale-specific information

```bash
[suhrob@RAW ~]$ locale -a
C
C.UTF-8
en_US.utf8
POSIX

[suhrob@RAW ~]$ locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
```

### ISO files as an offline repository

Create the folders (mount points) to mount the ISO files

  ```bash
$ sudo mkdir -p /mnt/repo_1
$ sudo mkdir -p /mnt/repo_2
$ sudo mkdir -p /mnt/repo_3
 ```

Auto mount ISO files

- Method #1: Edit `/etc/fstab`

```
/home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-1.iso /mnt/repo_1/ udf,iso9660 loop 0 0
/home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-2.iso /mnt/repo_2/ udf,iso9660 loop 0 0
/home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-3.iso /mnt/repo_3/ udf,iso9660 loop 0 0
```

- Method #2: Configure cron job for root user `sudo crontab -e`

```
@reboot mount -o loop /home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-1.iso /mnt/repo_1/
@reboot mount -o loop /home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-2.iso /mnt/repo_1/
@reboot mount -o loop /home/suhrob/Public/debian_dvd/debian-10.2.0-amd64-DVD-3.iso /mnt/repo_1/
```

Configure `/etc/apt/sources.list`

```
deb [ trusted=yes ] file:/mnt/repo_1/ buster main contrib
deb [ trusted=yes ] file:/mnt/repo_2/ buster main contrib
deb [ trusted=yes ] file:/mnt/repo_3/ buster main contrib
```

Update

```bash
$ sudo apt update
```

### X Window Server

* Install X.Org Server

```bash
$ sudo apt install xorg
```

* XDG User Directories

Create a local configuration file

```bash
$ cp /etc/xdg/user-dirs.defaults ~/.config/user-dirs.dirs
```

File `~/.config/user-dirs.dirs` content

```
XDG_DESKTOP_DIR="$HOME/Desktop"
XDG_DOWNLOAD_DIR="$HOME/Downloads"
XDG_TEMPLATES_DIR="$HOME/Templates"
XDG_PUBLICSHARE_DIR="$HOME/Public"
XDG_DOCUMENTS_DIR="$HOME/Documents"
XDG_MUSIC_DIR="$HOME/Music"
XDG_PICTURES_DIR="$HOME/Pictures"
XDG_VIDEOS_DIR="$HOME/Videos"
```

Create a full suite of localized default user directories

```bash
$ xdg-user-dirs-update
```

### Backlight control

Install xbacklight package

```
$ sudo apt install xbacklight
```


Check the backlight directory

```
[suhrob@RAW ~]$ ls /sys/class/backlight/
intel_backlight
```

Get the `Identifier` value by running `xrandr --verbose`

```bash
[suhrob@RAW ~]$ xrandr --verbose
Screen 0: minimum 8 x 8, current 1920 x 1080, maximum 32767 x 32767
eDP1 connected primary 1920x1080+0+0 (0x4b) normal (normal left inverted right x axis y axis) 310mm x 170mm
	Identifier: 0x43
	Timestamp:  3489
	Subpixel:   unknown
	Gamma:      1.0:1.2:1.4
	Brightness: 1.0

...
```

Create `/etc/X11/xorg.conf` and add

```
Section "Device"
    Identifier  "0x43"
    Driver      "intel"
    Option      "Backlight"  "intel_backlight"
EndSection
```

### Fonts

Install `fontconfig`

```bash
$ sudo apt install fontconfig fontconfig-config
```

Fontconfig configuration

```bash
$ sudo dpkg-reconfigure fontconfig-config fontconfig
```

For more information please see man pages

```bash
$ man fonts.conf
```

Install fonts from repository

```bash
$ sudo apt install ttf-ancient-fonts-symbola  ttf-unifont  fonts-powerline fonts-symbola fonts-liberation*
```

Download Emoji font [joypixel-android.ttf](https://www.joypixels.com) and put file into `~/.fonts` folder. Or get it from [here](dotfiles/.fonts)

Build iosevka font from source [iosevka-regular.ttf](https://github.com/be5invis/Iosevka) and put iosevka-regular.ttf into `~/.fonts` folder. Or get it from [here](dotfiles/.fonts)

Check Emoji coverage

```bash
$ surf https://getemoji.com
```

Add one line in to `~/.bashrc` to set FONTCONFIG_PATH env

```bash
export FONTCONFIG_PATH="/etc/fonts"
```

Create fonts configuration file `~/.config/fontconfig/fonts.conf`

```xml
<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>

 <alias>
    <family>serif</family>
    <prefer><family>Liberation Serif</family></prefer>
  </alias>
  <alias>
    <family>sans-serif</family>
    <prefer><family>Liberation Sans</family></prefer>
  </alias>
  <alias>
    <family>sans</family>
    <prefer><family>Liberation Sans</family></prefer>
  </alias>
  <alias>
    <family>monospace</family>
    <prefer><family>Iosevka</family></prefer>
  </alias>

  <!-- This sets Symbola as the final fallback font for the monospace font family. -->
  <match target="pattern">
    <test name="family"><string>monospace</string></test>
    <edit name="family" mode="append"><string>Symbola</string></edit>
  </match>

</fontconfig>
```

Verify system font families

```
[suhrob@RAW ~]$ fc-match serif
LiberationSerif-Regular.ttf: "Liberation Serif" "Regular"
[suhrob@RAW ~]$ fc-match sans-serif
LiberationSans-Regular.ttf: "Liberation Sans" "Regular"
[suhrob@RAW ~]$ fc-match sans
LiberationSans-Regular.ttf: "Liberation Sans" "Regular"
[suhrob@RAW ~]$ fc-match monospace
LiberationMono-Regular.ttf: "Liberation Mono" "Regular"
```

### GTK3 Theme

Download [Shades Of Gray Theme Collection](https://www.gnome-look.org/p/1244058/) and extract harvest variation in to `~/.themes` folder

Or get it from [here](dotfiles/.themes/)

### Transparency, Fade and Shadow Effects

Install packages

```bash
$ sudo apt install compton compton-conf
```

Execute `compton-conf` to generate config file and configuring

|                    Setting                      |  Value  |
|-------------------------------------------------|---------|
| Avoid drawing shadows on dock/panel windows     | uncheck |
| Don't draw shadows on DND windows               | uncheck |
| The left offset for shadows                     | -5      |
| The top offset for shadows                      | -5      |
| The opacity for menus                           | 1.00    |
| Opacity of window titlebars and borders         | 1.00    |
| Opacity change between steps while fading in    | 0.060   |
| Opacity change between steps while fading out   | 0.060   |


### SLiM Display Manager

Install slim package

```bash
$ sudo apt install slim
```

For more information please see man pages

```
man slim
man slimlock
```

Slim configuration `/etc/slim.conf`

```
login_cmd          exec /bin/bash -login ~/.xinitrc
default_user       suhrob
focus_password     yes
current_theme      micro-theme
```

Slimlock configuration `/etc/slimlock.conf`

```
show_username 0
tty_lock 0
```

Check for [Slim configuration files and custom theme](sources/slim-files/)

### Askpass helper

Install graphical helper program which is executed to read the user's password:

```bash
sudo apt install ssh-askpass
```

Configure `/etc/sudo.conf`. For more information please see `man sudo.conf` manual

```
#
# An askpass helper program may be specified to provide a graphical
# password prompt for "sudo -A" support.  Sudo does not ship with
# its own askpass program but can use the OpenSSH askpass.
#
# Use the OpenSSH askpass
Path askpass /usr/bin/ssh-askpass
```

Alternative configuration method is to add line in `~/.bashrc`

```bash
export SUDO_ASKPASS="/ust/bin/ssh-askpass"
```

Please see below an example of how to check askpass


```bash
sudo -A timeshift-gtk
```

### Audio

Install necessary packages

```bash
$ sudo apt install alsa-utils
$ sudo apt install pulseaudio pulseaudio-utils pulseaudio-module-bluetooth pulsemixer
```

### Editor

Replace vim with neovim

```bash
$ sudo apt pure vim-*
$ sudo apt install neovim neovim-qtA
```

### Terminal

Package: `xterm`

Color scheme: `tango`

Colors HEX code:

```
xterm*background:  #000000
xterm*foreground:  #d3d7cf
! Black
xterm*color0:      #000000
xterm*color8:      #555753
! Red
xterm*color1:      #CC0000
xterm*color9:      #EF2929
! Green
xterm*color2:      #4E9A06
xterm*color10:     #8AE234
! Yellow
xterm*color3:      #C4A000
xterm*color11:     #FCE94F
! Blue
xterm*color4:      #3465A4
xterm*color12:     #739FCF
! Magenda
xterm*color5:      #75507B
xterm*color13:     #AD7FA8
! Cyan
xterm*color6:      #06989A
xterm*color14:     #34E2E2
! White
xterm*color7:      #D3D7CF
xterm*color15:     #EEEEEC
```

![Image](img/tango_colorscheme.png)

Additional terminal package: `xfce4-terminal`

PART 2/2 DWM Installation Workflow
----------------------------------
Suckless Dynamic Window Manager: [www.suckless.org](http://www.suckless.org)

### DWM compiling

Source: [dwm-6.2.tar.gz](sources/dwm/dwm-6.2.tar.gz)

Required packages for compiling

```bash
$ sudo apt install build-essential libxft-dev libx11-dev libxinerama-dev sharutils suckless-tools
```

Compile

```bash
$ sudo make clean install
```

> NOTE! Compile source files only after patching

### Patching

All patch files: [here](sources/dwm/patches)

- Patch #1: [complete-own-modification_2019-Dec-29_01-21-30.dwm-6.2.patch.diff](/sources/dwm/patches/complete-own-modification_2019-Dec-29_01-21-30.dwm-6.2.patch.diff)

- Patch #2: [step-2.patch.dwm-movestack-6.1.diff](sources/dwm/patches/step-2.patch.dwm-movestack-6.1.diff)

- Patch #3: [step-3.patch.dwm-fullgaps-6.2.diff](sources/dwm/patches/step-3.patch.dwm-fullgaps-6.2.diff)

- Patch #4: [step-1.2.3.patch.dwm-6.2-20191020-statuscolor-systray-movestack_fullgaps.diff](sources/dwm/patches/step-1.2.3.patch.dwm-6.2-20191020-statuscolor-systray-movestack_fullgaps.diff)

- Patch #5: [complete-own-modification_2019-Oct-28_16-42-29.dwm-6.2.patch.diff](sources/dwm/patches/complete-own-modification_2019-Oct-28_16-42-29.dwm-6.2.patch.diff)

Please see below an example of patching and compiling process

```bash
$ tar -xvzf dwm-6.2.tar.gz
$ cd dwm-6.2/
$ wget https://dwm.suckless.org/patches/systray/dwm-systray-20190208-cb3f58a.diff
$ sudo patch -p1 < dwm-systray-20190208-cb3f58a.diff
$ sudo make clean install
```

### Status color

Color schemes with escape codes

![Image](img/color-schemes.png)

Script [status-colortest.sh](sources/dwm/status-colortest.sh)

Usage example

```bash
$ xsetroot -name "$(echo -ne "\x03Let's\x04take\x10the\x11colors\x13...")"
```
Result

![Image](img/status-bar-example.png)

